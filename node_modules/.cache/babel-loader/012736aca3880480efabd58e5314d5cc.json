{"ast":null,"code":"var _jsxFileName = \"/Users/rohangore/Documents/jesting-react/src/pages/PostDetail.js\",\n    _s = $RefreshSig$();\n\nimport { Box, Button, IconButton, Modal, ModalBody, ModalCloseButton, ModalContent, ModalFooter, ModalHeader, ModalOverlay, useColorMode, useDisclosure } from \"@chakra-ui/core\";\nimport React, { useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Get, Put } from \"../Utils/JSONUtil\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { queryCache } from \"../reactQuery\";\nimport PostManage from \"../components/PostManage\";\nimport CommentEdit from \"../components/CommentEdit\";\nimport CommentList from \"../components/CommentList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst editPost = _ref => {\n  let {\n    postId,\n    title,\n    description\n  } = _ref;\n  return Put(`http://localhost:3002/posts/${postId}`, {\n    title,\n    description\n  });\n};\n\nconst PostDetail = () => {\n  _s();\n\n  const {\n    postId\n  } = useParams();\n  const {\n    isLoading,\n    error,\n    data,\n    refetch\n  } = useQuery(\"postdetail\", () => {\n    return Get(`http://localhost:3002/posts/${postId}`);\n  });\n  const [mutate] = useMutation(editPost);\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n\n  const onSubmitHandler = values => {\n    const {\n      title,\n      description\n    } = values;\n    mutate({\n      postId,\n      title,\n      description\n    }).then(() => {\n      // Close Modal\n      onClose(); // refetch Detail\n\n      refetch(); // Refetch Post List\n\n      queryCache.refetchQueries([\"postlist\"]);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    refetch();\n  }, [postId]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    w: \"100%\",\n    children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          marginTop: \".6rem\",\n          icon: \"edit\",\n          onClick: onOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        marginLeft: \".3rem\",\n        marginTop: \"1rem\",\n        minHeight: \"300px\",\n        children: data.data.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CommentList, {\n        postId: postId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CommentEdit, {\n        postId: postId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: isOpen,\n        onClose: onClose,\n        children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n          children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n            children: \"Post Manage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n            children: /*#__PURE__*/_jsxDEV(PostManage, {\n              onSubmit: onSubmitHandler,\n              defaultTitle: data.data.title,\n              defaultDescription: data.data.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: onClose,\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PostDetail, \"jKVfV4MHxENWIz0EcEBhYmx4/e0=\", false, function () {\n  return [useParams, useQuery, useMutation, useDisclosure];\n});\n\n_c = PostDetail;\nexport default PostDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostDetail\");","map":{"version":3,"names":["Box","Button","IconButton","Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalHeader","ModalOverlay","useColorMode","useDisclosure","React","useEffect","useParams","Get","Put","useMutation","useQuery","queryCache","PostManage","CommentEdit","CommentList","editPost","postId","title","description","PostDetail","isLoading","error","data","refetch","mutate","isOpen","onOpen","onClose","onSubmitHandler","values","then","refetchQueries","catch","err","console","log"],"sources":["/Users/rohangore/Documents/jesting-react/src/pages/PostDetail.js"],"sourcesContent":["import {\n  Box,\n  Button,\n  IconButton,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  useColorMode,\n  useDisclosure,\n} from \"@chakra-ui/core\";\nimport React, { useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Get, Put } from \"../Utils/JSONUtil\";\nimport { useMutation, useQuery } from \"react-query\";\n\nimport { queryCache } from \"../reactQuery\";\n\nimport PostManage from \"../components/PostManage\";\nimport CommentEdit from \"../components/CommentEdit\";\nimport CommentList from \"../components/CommentList\";\n\nconst editPost = ({ postId, title, description }) => {\n  return Put(`http://localhost:3002/posts/${postId}`, {\n    title,\n    description,\n  });\n};\n\nconst PostDetail = () => {\n  const { postId } = useParams();\n\n  const { isLoading, error, data, refetch } = useQuery(\"postdetail\", () => {\n    return Get(`http://localhost:3002/posts/${postId}`);\n  });\n\n  const [mutate] = useMutation(editPost);\n\n  const { isOpen, onOpen, onClose } = useDisclosure();\n\n  const onSubmitHandler = (values) => {\n    const { title, description } = values;\n\n    mutate({\n      postId,\n      title,\n      description,\n    })\n      .then(() => {\n        // Close Modal\n        onClose();\n        // refetch Detail\n        refetch();\n\n        // Refetch Post List\n        queryCache.refetchQueries([\"postlist\"]);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  useEffect(() => {\n    refetch();\n  }, [postId]);\n\n  return (\n    <Box w=\"100%\">\n      {isLoading ? (\n        <div>Loading</div>\n      ) : (\n        <>\n          <Box display=\"flex\" justifyContent=\"flex-end\">\n            <IconButton marginTop=\".6rem\" icon=\"edit\" onClick={onOpen} />\n          </Box>\n          <Box marginLeft=\".3rem\" marginTop=\"1rem\" minHeight=\"300px\">\n            {data.data.description}\n          </Box>\n\n          <CommentList postId={postId} />\n          <CommentEdit postId={postId} />\n          <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n              <ModalHeader>Post Manage</ModalHeader>\n              <ModalCloseButton />\n              <ModalBody>\n                <PostManage\n                  onSubmit={onSubmitHandler}\n                  defaultTitle={data.data.title}\n                  defaultDescription={data.data.description}\n                />\n              </ModalBody>\n              <ModalFooter>\n                <Button onClick={onClose}>Close</Button>\n              </ModalFooter>\n            </ModalContent>\n          </Modal>\n        </>\n      )}\n    </Box>\n  );\n};\n\nexport default PostDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}