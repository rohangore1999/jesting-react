{"ast":null,"code":"import React from 'react';\nimport { useIsMounted } from './utils';\nimport { getResolvedQueryConfig } from '../core/config';\nimport { QueryObserver } from '../core/queryObserver';\nimport { useErrorResetBoundary } from './ReactQueryErrorResetBoundary';\nimport { useQueryCache } from './ReactQueryCacheProvider';\nimport { useContextConfig } from './ReactQueryConfigProvider';\nexport function useBaseQuery(queryKey, config) {\n  var _React$useReducer = React.useReducer(function (c) {\n    return c + 1;\n  }, 0),\n      rerender = _React$useReducer[1];\n\n  var isMounted = useIsMounted();\n  var cache = useQueryCache();\n  var contextConfig = useContextConfig();\n  var errorResetBoundary = useErrorResetBoundary(); // Get resolved config\n\n  var resolvedConfig = getResolvedQueryConfig(cache, queryKey, contextConfig, config); // Create query observer\n\n  var observerRef = React.useRef();\n  var firstRender = !observerRef.current;\n  var observer = observerRef.current || new QueryObserver(resolvedConfig);\n  observerRef.current = observer; // Subscribe to the observer\n\n  React.useEffect(function () {\n    errorResetBoundary.clearReset();\n    return observer.subscribe(function () {\n      if (isMounted()) {\n        rerender();\n      }\n    });\n  }, [isMounted, observer, rerender, errorResetBoundary]); // Update config\n\n  if (!firstRender) {\n    observer.updateConfig(resolvedConfig);\n  }\n\n  var result = observer.getCurrentResult(); // Handle suspense\n\n  if (resolvedConfig.suspense || resolvedConfig.useErrorBoundary) {\n    var query = observer.getCurrentQuery();\n\n    if (result.isError && !errorResetBoundary.isReset() && query.state.throwInErrorBoundary) {\n      throw result.error;\n    }\n\n    if (resolvedConfig.enabled && resolvedConfig.suspense && !result.isSuccess) {\n      errorResetBoundary.clearReset();\n      var unsubscribe = observer.subscribe();\n      throw observer.fetch().finally(unsubscribe);\n    }\n  }\n\n  return result;\n}","map":{"version":3,"names":["React","useIsMounted","getResolvedQueryConfig","QueryObserver","useErrorResetBoundary","useQueryCache","useContextConfig","useBaseQuery","queryKey","config","_React$useReducer","useReducer","c","rerender","isMounted","cache","contextConfig","errorResetBoundary","resolvedConfig","observerRef","useRef","firstRender","current","observer","useEffect","clearReset","subscribe","updateConfig","result","getCurrentResult","suspense","useErrorBoundary","query","getCurrentQuery","isError","isReset","state","throwInErrorBoundary","error","enabled","isSuccess","unsubscribe","fetch","finally"],"sources":["/Users/rohangore/Documents/jesting-react/node_modules/react-query/es/react/useBaseQuery.js"],"sourcesContent":["import React from 'react';\nimport { useIsMounted } from './utils';\nimport { getResolvedQueryConfig } from '../core/config';\nimport { QueryObserver } from '../core/queryObserver';\nimport { useErrorResetBoundary } from './ReactQueryErrorResetBoundary';\nimport { useQueryCache } from './ReactQueryCacheProvider';\nimport { useContextConfig } from './ReactQueryConfigProvider';\nexport function useBaseQuery(queryKey, config) {\n  var _React$useReducer = React.useReducer(function (c) {\n    return c + 1;\n  }, 0),\n      rerender = _React$useReducer[1];\n\n  var isMounted = useIsMounted();\n  var cache = useQueryCache();\n  var contextConfig = useContextConfig();\n  var errorResetBoundary = useErrorResetBoundary(); // Get resolved config\n\n  var resolvedConfig = getResolvedQueryConfig(cache, queryKey, contextConfig, config); // Create query observer\n\n  var observerRef = React.useRef();\n  var firstRender = !observerRef.current;\n  var observer = observerRef.current || new QueryObserver(resolvedConfig);\n  observerRef.current = observer; // Subscribe to the observer\n\n  React.useEffect(function () {\n    errorResetBoundary.clearReset();\n    return observer.subscribe(function () {\n      if (isMounted()) {\n        rerender();\n      }\n    });\n  }, [isMounted, observer, rerender, errorResetBoundary]); // Update config\n\n  if (!firstRender) {\n    observer.updateConfig(resolvedConfig);\n  }\n\n  var result = observer.getCurrentResult(); // Handle suspense\n\n  if (resolvedConfig.suspense || resolvedConfig.useErrorBoundary) {\n    var query = observer.getCurrentQuery();\n\n    if (result.isError && !errorResetBoundary.isReset() && query.state.throwInErrorBoundary) {\n      throw result.error;\n    }\n\n    if (resolvedConfig.enabled && resolvedConfig.suspense && !result.isSuccess) {\n      errorResetBoundary.clearReset();\n      var unsubscribe = observer.subscribe();\n      throw observer.fetch().finally(unsubscribe);\n    }\n  }\n\n  return result;\n}"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,SAA7B;AACA,SAASC,sBAAT,QAAuC,gBAAvC;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,qBAAT,QAAsC,gCAAtC;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,gBAAT,QAAiC,4BAAjC;AACA,OAAO,SAASC,YAAT,CAAsBC,QAAtB,EAAgCC,MAAhC,EAAwC;EAC7C,IAAIC,iBAAiB,GAAGV,KAAK,CAACW,UAAN,CAAiB,UAAUC,CAAV,EAAa;IACpD,OAAOA,CAAC,GAAG,CAAX;EACD,CAFuB,EAErB,CAFqB,CAAxB;EAAA,IAGIC,QAAQ,GAAGH,iBAAiB,CAAC,CAAD,CAHhC;;EAKA,IAAII,SAAS,GAAGb,YAAY,EAA5B;EACA,IAAIc,KAAK,GAAGV,aAAa,EAAzB;EACA,IAAIW,aAAa,GAAGV,gBAAgB,EAApC;EACA,IAAIW,kBAAkB,GAAGb,qBAAqB,EAA9C,CAT6C,CASK;;EAElD,IAAIc,cAAc,GAAGhB,sBAAsB,CAACa,KAAD,EAAQP,QAAR,EAAkBQ,aAAlB,EAAiCP,MAAjC,CAA3C,CAX6C,CAWwC;;EAErF,IAAIU,WAAW,GAAGnB,KAAK,CAACoB,MAAN,EAAlB;EACA,IAAIC,WAAW,GAAG,CAACF,WAAW,CAACG,OAA/B;EACA,IAAIC,QAAQ,GAAGJ,WAAW,CAACG,OAAZ,IAAuB,IAAInB,aAAJ,CAAkBe,cAAlB,CAAtC;EACAC,WAAW,CAACG,OAAZ,GAAsBC,QAAtB,CAhB6C,CAgBb;;EAEhCvB,KAAK,CAACwB,SAAN,CAAgB,YAAY;IAC1BP,kBAAkB,CAACQ,UAAnB;IACA,OAAOF,QAAQ,CAACG,SAAT,CAAmB,YAAY;MACpC,IAAIZ,SAAS,EAAb,EAAiB;QACfD,QAAQ;MACT;IACF,CAJM,CAAP;EAKD,CAPD,EAOG,CAACC,SAAD,EAAYS,QAAZ,EAAsBV,QAAtB,EAAgCI,kBAAhC,CAPH,EAlB6C,CAyBY;;EAEzD,IAAI,CAACI,WAAL,EAAkB;IAChBE,QAAQ,CAACI,YAAT,CAAsBT,cAAtB;EACD;;EAED,IAAIU,MAAM,GAAGL,QAAQ,CAACM,gBAAT,EAAb,CA/B6C,CA+BH;;EAE1C,IAAIX,cAAc,CAACY,QAAf,IAA2BZ,cAAc,CAACa,gBAA9C,EAAgE;IAC9D,IAAIC,KAAK,GAAGT,QAAQ,CAACU,eAAT,EAAZ;;IAEA,IAAIL,MAAM,CAACM,OAAP,IAAkB,CAACjB,kBAAkB,CAACkB,OAAnB,EAAnB,IAAmDH,KAAK,CAACI,KAAN,CAAYC,oBAAnE,EAAyF;MACvF,MAAMT,MAAM,CAACU,KAAb;IACD;;IAED,IAAIpB,cAAc,CAACqB,OAAf,IAA0BrB,cAAc,CAACY,QAAzC,IAAqD,CAACF,MAAM,CAACY,SAAjE,EAA4E;MAC1EvB,kBAAkB,CAACQ,UAAnB;MACA,IAAIgB,WAAW,GAAGlB,QAAQ,CAACG,SAAT,EAAlB;MACA,MAAMH,QAAQ,CAACmB,KAAT,GAAiBC,OAAjB,CAAyBF,WAAzB,CAAN;IACD;EACF;;EAED,OAAOb,MAAP;AACD"},"metadata":{},"sourceType":"module"}